{"version":3,"file":"ng2-completer.umd.js","sources":["services/completer-data-factory.js","directives/ctr-completer.js","services/completer-base-data.js","services/local-data.js","services/remote-data.js","services/completer-service.js","globals.js","components/completer-cmp.js","components/completer-list-item-cmp.js","directives/ctr-dropdown.js","directives/ctr-input.js","directives/ctr-list.js","directives/ctr-row.js","ng2-completer.module.js"],"sourcesContent":["import { Http } from \"@angular/http\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nexport function localDataFactory() {\n    return function () {\n        return new LocalData();\n    };\n}\nexport function remoteDataFactory(http) {\n    return function () {\n        return new RemoteData(http);\n    };\n}\nexport var LocalDataFactoryProvider = { provide: LocalData, useFactory: localDataFactory };\nexport var RemoteDataFactoryProvider = { provide: RemoteData, useFactory: remoteDataFactory, deps: [Http] };\n//# sourceMappingURL=completer-data-factory.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Directive, EventEmitter, Output } from \"@angular/core\";\nvar CtrCompleter = (function () {\n    function CtrCompleter() {\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this._hasHighlited = false;\n        this.hasSelected = false;\n    }\n    CtrCompleter.prototype.ngOnInit = function () {\n        //\n    };\n    CtrCompleter.prototype.registerList = function (list) {\n        this.list = list;\n    };\n    CtrCompleter.prototype.registerDropdown = function (dropdown) {\n        this.dropdown = dropdown;\n    };\n    CtrCompleter.prototype.onHighlighted = function (item) {\n        this.highlighted.emit(item);\n        this._hasHighlited = !!item;\n    };\n    CtrCompleter.prototype.onSelected = function (item) {\n        this.selected.emit(item);\n        if (item) {\n            this.hasSelected = true;\n        }\n        this.clear();\n    };\n    CtrCompleter.prototype.search = function (term) {\n        if (this.hasSelected) {\n            this.selected.emit(null);\n            this.hasSelected = false;\n        }\n        if (this.list) {\n            this.list.search(term);\n        }\n    };\n    CtrCompleter.prototype.clear = function () {\n        if (this.dropdown) {\n            this.dropdown.clear();\n        }\n        if (this.list) {\n            this.list.clear();\n        }\n        this._hasHighlited = false;\n    };\n    CtrCompleter.prototype.selectCurrent = function () {\n        if (this.dropdown) {\n            this.dropdown.selectCurrent();\n        }\n    };\n    CtrCompleter.prototype.nextRow = function () {\n        if (this.dropdown) {\n            this.dropdown.nextRow();\n        }\n    };\n    CtrCompleter.prototype.prevRow = function () {\n        if (this.dropdown) {\n            this.dropdown.prevRow();\n        }\n    };\n    CtrCompleter.prototype.hasHighlited = function () {\n        return this._hasHighlited;\n    };\n    return CtrCompleter;\n}());\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], CtrCompleter.prototype, \"selected\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], CtrCompleter.prototype, \"highlighted\", void 0);\nCtrCompleter = __decorate([\n    Directive({\n        selector: \"[ctrCompleter]\",\n    }),\n    __metadata(\"design:paramtypes\", [])\n], CtrCompleter);\nexport { CtrCompleter };\n//# sourceMappingURL=ctr-completer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Subject } from \"rxjs/Subject\";\nvar CompleterBaseData = (function (_super) {\n    __extends(CompleterBaseData, _super);\n    function CompleterBaseData() {\n        return _super.call(this) || this;\n    }\n    CompleterBaseData.prototype.cancel = function () { };\n    CompleterBaseData.prototype.searchFields = function (searchFields) {\n        this._searchFields = searchFields;\n        return this;\n    };\n    CompleterBaseData.prototype.titleField = function (titleField) {\n        this._titleField = titleField;\n        return this;\n    };\n    CompleterBaseData.prototype.descriptionField = function (descriptionField) {\n        this._descriptionField = descriptionField;\n        return this;\n    };\n    CompleterBaseData.prototype.imageField = function (imageField) {\n        this._imageField = imageField;\n        return this;\n    };\n    CompleterBaseData.prototype.extractMatches = function (data, term) {\n        var _this = this;\n        var matches = [];\n        var searchFields = this._searchFields ? this._searchFields.split(\",\") : null;\n        if (this._searchFields !== null && this._searchFields !== undefined && term != \"\") {\n            matches = data.filter(function (item) {\n                var values = searchFields ? searchFields.map(function (searchField) { return _this.extractValue(item, searchField); }).filter(function (value) { return !!value; }) : [item];\n                return values.some(function (value) { return value.toString().toLowerCase().indexOf(term.toString().toLowerCase()) >= 0; });\n            });\n        }\n        else {\n            matches = data;\n        }\n        return matches;\n    };\n    CompleterBaseData.prototype.extractTitle = function (item) {\n        var _this = this;\n        // split title fields and run extractValue for each and join with ' '\n        return this._titleField.split(\",\")\n            .map(function (field) {\n            return _this.extractValue(item, field);\n        })\n            .join(\" \");\n    };\n    CompleterBaseData.prototype.extractValue = function (obj, key) {\n        var keys;\n        var result;\n        if (key) {\n            keys = key.split(\".\");\n            result = obj;\n            for (var i = 0; i < keys.length; i++) {\n                if (result) {\n                    result = result[keys[i]];\n                }\n            }\n        }\n        else {\n            result = obj;\n        }\n        return result;\n    };\n    CompleterBaseData.prototype.processResults = function (matches) {\n        var i;\n        var description = \"\";\n        var image = null;\n        var formattedText;\n        var formattedDesc;\n        var results = [];\n        if (matches && matches.length > 0) {\n            for (i = 0; i < matches.length; i++) {\n                if (this._titleField) {\n                    formattedText = this.extractTitle(matches[i]);\n                }\n                else {\n                    formattedText = matches[i];\n                }\n                if (this._descriptionField) {\n                    description = formattedDesc = this.extractValue(matches[i], this._descriptionField);\n                }\n                if (this._imageField) {\n                    image = this.extractValue(matches[i], this._imageField);\n                }\n                results.push({\n                    title: formattedText,\n                    description: formattedDesc,\n                    image: image,\n                    originalObject: matches[i]\n                });\n            }\n        }\n        return results;\n    };\n    return CompleterBaseData;\n}(Subject));\nexport { CompleterBaseData };\n//# sourceMappingURL=completer-base-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Injectable } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar LocalData = (function (_super) {\n    __extends(LocalData, _super);\n    function LocalData() {\n        return _super.call(this) || this;\n    }\n    LocalData.prototype.data = function (data) {\n        var _this = this;\n        if (data instanceof Observable) {\n            data.subscribe(function (res) {\n                _this._data = res;\n                if (_this.savedTerm) {\n                    _this.search(_this.savedTerm);\n                }\n            });\n        }\n        else {\n            this._data = data;\n        }\n        return this;\n    };\n    LocalData.prototype.search = function (term) {\n        if (!this._data) {\n            this.savedTerm = term;\n        }\n        else {\n            this.savedTerm = null;\n            var matches = this.extractMatches(this._data, term);\n            this.next(this.processResults(matches));\n        }\n    };\n    return LocalData;\n}(CompleterBaseData));\nLocalData = __decorate([\n    Injectable(),\n    __metadata(\"design:paramtypes\", [])\n], LocalData);\nexport { LocalData };\n//# sourceMappingURL=local-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Headers } from \"@angular/http\";\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/catch\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar RemoteData = (function (_super) {\n    __extends(RemoteData, _super);\n    function RemoteData(http) {\n        var _this = _super.call(this) || this;\n        _this.http = http;\n        _this._urlFormater = null;\n        _this._dataField = null;\n        return _this;\n    }\n    RemoteData.prototype.remoteUrl = function (remoteUrl) {\n        this._remoteUrl = remoteUrl;\n        return this;\n    };\n    RemoteData.prototype.urlFormater = function (urlFormater) {\n        this._urlFormater = urlFormater;\n    };\n    RemoteData.prototype.dataField = function (dataField) {\n        this._dataField = dataField;\n    };\n    RemoteData.prototype.headers = function (headers) {\n        this._headers = headers;\n    };\n    RemoteData.prototype.search = function (term) {\n        var _this = this;\n        this.cancel();\n        // let params = {};\n        var url = \"\";\n        if (this._urlFormater) {\n            url = this._urlFormater(term);\n        }\n        else {\n            url = this._remoteUrl + encodeURIComponent(term);\n        }\n        this.remoteSearch = this.http.get(url, { headers: this._headers || new Headers() })\n            .map(function (res) { return res.json(); })\n            .map(function (data) {\n            var matchaes = _this.extractValue(data, _this._dataField);\n            return _this.extractMatches(matchaes, term);\n        })\n            .map(function (matches) {\n            var results = _this.processResults(matches);\n            _this.next(results);\n            return results;\n        })\n            .catch(function (err) {\n            _this.error(err);\n            return null;\n        })\n            .subscribe();\n    };\n    RemoteData.prototype.cancel = function () {\n        if (this.remoteSearch) {\n            this.remoteSearch.unsubscribe();\n        }\n    };\n    return RemoteData;\n}(CompleterBaseData));\nexport { RemoteData };\n//# sourceMappingURL=remote-data.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Injectable, Inject } from \"@angular/core\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nvar CompleterService = (function () {\n    function CompleterService(localDataFactory, // Using any instead of () => LocalData because on AoT errors\n        remoteDataFactory // Using any instead of () => LocalData because on AoT errors\n    ) {\n        this.localDataFactory = localDataFactory;\n        this.remoteDataFactory = remoteDataFactory; // Using any instead of () => LocalData because on AoT errors\n    }\n    CompleterService.prototype.local = function (data, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var localData = this.localDataFactory();\n        return localData\n            .data(data)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    CompleterService.prototype.remote = function (url, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var remoteData = this.remoteDataFactory();\n        return remoteData\n            .remoteUrl(url)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    return CompleterService;\n}());\nCompleterService = __decorate([\n    Injectable(),\n    __param(0, Inject(LocalData)),\n    __param(1, Inject(RemoteData)),\n    __metadata(\"design:paramtypes\", [Object, Object])\n], CompleterService);\nexport { CompleterService };\n//# sourceMappingURL=completer-service.js.map","export var MAX_CHARS = 524288; // the default max length per the html maxlength attribute\n// the default max length per the html maxlength attribute\nexport var MIN_SEARCH_LENGTH = 3;\nexport var PAUSE = 250;\nexport var TEXT_SEARCHING = \"Searching...\";\nexport var TEXT_NORESULTS = \"No results found\";\nexport var CLEAR_TIMEOUT = 100;\n//# sourceMappingURL=globals.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Component, Input, Output, EventEmitter, ViewChild, forwardRef, ElementRef } from \"@angular/core\";\nimport { FormControl, NG_VALUE_ACCESSOR } from \"@angular/forms\";\nimport { CtrCompleter } from \"../directives/ctr-completer\";\nimport { CompleterService } from \"../services/completer-service\";\nimport { MAX_CHARS, MIN_SEARCH_LENGTH, PAUSE, TEXT_SEARCHING, TEXT_NORESULTS } from \"../globals\";\nimport \"rxjs/add/operator/catch\";\nvar noop = function () { };\nvar COMPLETER_CONTROL_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(function () { return CompleterCmp; }),\n    multi: true\n};\nvar CompleterCmp = (function () {\n    function CompleterCmp(completerService) {\n        this.completerService = completerService;\n        this.inputName = \"\";\n        this.pause = PAUSE;\n        this.minSearchLength = MIN_SEARCH_LENGTH;\n        this.maxChars = MAX_CHARS;\n        this.overrideSuggested = false;\n        this.clearSelected = false;\n        this.fillHighlighted = true;\n        this.placeholder = \"\";\n        this.textSearching = TEXT_SEARCHING;\n        this.textNoResults = TEXT_NORESULTS;\n        this.autoMatch = false;\n        this.disableInput = false;\n        this.autofocus = false;\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this.blur = new EventEmitter();\n        this.searchStr = \"\";\n        this.control = new FormControl(\"\");\n        this.displaySearching = true;\n        this._onTouchedCallback = noop;\n        this._onChangeCallback = noop;\n    }\n    Object.defineProperty(CompleterCmp.prototype, \"value\", {\n        get: function () { return this.searchStr; },\n        set: function (v) {\n            if (v !== this.searchStr) {\n                this.searchStr = v;\n            }\n            // Propagate the change in any case\n            this._onChangeCallback(v);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    CompleterCmp.prototype.onTouched = function () {\n        this._onTouchedCallback();\n    };\n    CompleterCmp.prototype.writeValue = function (value) {\n        this.searchStr = value;\n    };\n    CompleterCmp.prototype.registerOnChange = function (fn) {\n        this._onChangeCallback = fn;\n    };\n    CompleterCmp.prototype.registerOnTouched = function (fn) {\n        this._onTouchedCallback = fn;\n    };\n    CompleterCmp.prototype.ngAfterViewInit = function () {\n        if (this.autofocus && this.ctrInput) {\n            this.ctrInput.nativeElement.focus();\n        }\n    };\n    CompleterCmp.prototype.ngOnInit = function () {\n        var _this = this;\n        if (this.datasource) {\n            if (this.datasource instanceof Array) {\n                this.dataService = this.completerService.local(this.datasource);\n            }\n            else if (typeof (this.datasource) === \"string\") {\n                this.dataService = this.completerService.remote(this.datasource);\n            }\n            else {\n                this.dataService = this.datasource;\n            }\n        }\n        this.completer.selected.subscribe(function (item) {\n            var title = item ? item.title : \"\";\n            _this.selected.emit(item);\n            _this._onChangeCallback(title);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            _this.highlighted.emit(item);\n        });\n        if (this.textSearching === \"false\") {\n            this.displaySearching = false;\n        }\n    };\n    CompleterCmp.prototype.onBlur = function () {\n        this.blur.emit();\n        this.onTouched();\n    };\n    CompleterCmp.prototype.onChange = function (value) {\n        this.value = value;\n    };\n    CompleterCmp.prototype.open = function (searchValue) {\n        if (searchValue === void 0) { searchValue = \"\"; }\n        this.completer.search(searchValue);\n    };\n    CompleterCmp.prototype.close = function () {\n        this.completer.clear();\n    };\n    return CompleterCmp;\n}());\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"dataService\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"datasource\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"inputName\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"pause\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"minSearchLength\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"maxChars\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"overrideSuggested\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"clearSelected\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"fillHighlighted\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"placeholder\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], CompleterCmp.prototype, \"matchClass\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"textSearching\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"textNoResults\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number)\n], CompleterCmp.prototype, \"fieldTabindex\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"autoMatch\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"disableInput\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], CompleterCmp.prototype, \"inputClass\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"autofocus\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"selected\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"highlighted\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", Object)\n], CompleterCmp.prototype, \"blur\", void 0);\n__decorate([\n    ViewChild(CtrCompleter),\n    __metadata(\"design:type\", CtrCompleter)\n], CompleterCmp.prototype, \"completer\", void 0);\n__decorate([\n    ViewChild(\"ctrInput\"),\n    __metadata(\"design:type\", ElementRef)\n], CompleterCmp.prototype, \"ctrInput\", void 0);\nCompleterCmp = __decorate([\n    Component({\n        selector: \"ng2-completer\",\n        template: \"\\n        <div class=\\\"completer-holder\\\" ctrCompleter>\\n            <input #ctrInput type=\\\"search\\\" class=\\\"completer-input\\\" ctrInput [ngClass]=\\\"inputClass\\\" [(ngModel)]=\\\"searchStr\\\" (ngModelChange)=\\\"onChange($event)\\\" [attr.name]=\\\"inputName\\\" [placeholder]=\\\"placeholder\\\"\\n                [attr.maxlength]=\\\"maxChars\\\" [tabindex]=\\\"fieldTabindex\\\" [disabled]=\\\"disableInput\\\" [clearSelected]=\\\"clearSelected\\\" [overrideSuggested]=\\\"overrideSuggested\\\" \\n                [fillHighlighted]=\\\"fillHighlighted\\\" (blur)=\\\"onBlur()\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" />\\n\\n            <div class=\\\"completer-dropdown-holder\\\" *ctrList=\\\"dataService; minSearchLength: minSearchLength; pause: pause; autoMatch: autoMatch; let items = results; let searchActive = searching; let isInitialized = searchInitialized;\\\">\\n                <div class=\\\"completer-dropdown\\\" ctrDropdown *ngIf=\\\"isInitialized\\\">\\n                    <div *ngIf=\\\"searchActive && displaySearching\\\" class=\\\"completer-searching\\\">{{textSearching}}</div>\\n                    <div *ngIf=\\\"!searchActive && (!items || items.length === 0)\\\" class=\\\"completer-no-results\\\">{{textNoResults}}</div>\\n                    <div class=\\\"completer-row-wrapper\\\" *ngFor=\\\"let item of items; let rowIndex=index\\\">\\n                        <div class=\\\"completer-row\\\" [ctrRow]=\\\"rowIndex\\\" [dataItem]=\\\"item\\\">\\n                            <div *ngIf=\\\"item.image || item.image === ''\\\" class=\\\"completer-image-holder\\\">\\n                                <img *ngIf=\\\"item.image != ''\\\" src=\\\"{{item.image}}\\\" class=\\\"completer-image\\\" />\\n                                <div *ngIf=\\\"item.image === ''\\\" class=\\\"completer-image-default\\\"></div>\\n                            </div>\\n                            <div class=\\\"completer-item-text\\\" [ngClass]=\\\"{'completer-item-text-image': item.image || item.image === '' }\\\">\\n                                <completer-list-item class=\\\"completer-title\\\" [text]=\\\"item.title\\\" [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'title'\\\"></completer-list-item>\\n                                <completer-list-item *ngIf=\\\"item.description && item.description != ''\\\" class=\\\"completer-description\\\" [text]=\\\"item.description\\\"\\n                                    [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'description'\\\">\\n                                </completer-list-item>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    \",\n        styles: [\"\\n    .completer-dropdown {\\n        border-color: #ececec;\\n        border-width: 1px;\\n        border-style: solid;\\n        border-radius: 2px;\\n        width: 250px;\\n        padding: 6px;\\n        cursor: pointer;\\n        z-index: 9999;\\n        position: absolute;\\n        margin-top: -6px;\\n        background-color: #ffffff;\\n    }\\n\\n    .completer-row {\\n        padding: 5px;\\n        color: #000000;\\n        margin-bottom: 4px;\\n        clear: both;\\n        display: inline-block;\\n        width: 103%;\\n    }\\n\\n    .completer-selected-row {\\n        background-color: lightblue;\\n        color: #ffffff;\\n    }\\n\\n    .completer-description {\\n        font-size: 14px;\\n    }\\n\\n    .completer-image-default {\\n        width: 16px; \\n        height: 16px;\\n        background-image: url(\\\"demo/res/img/default.png\\\");\\n    }\\n\\n    .completer-image-holder {\\n        float: left;\\n        width: 10%;\\n    }\\n    .completer-item-text-image {\\n        float: right;\\n        width: 90%;\\n    }\\n    \"],\n        providers: [COMPLETER_CONTROL_VALUE_ACCESSOR]\n    }),\n    __metadata(\"design:paramtypes\", [CompleterService])\n], CompleterCmp);\nexport { CompleterCmp };\n//# sourceMappingURL=completer-cmp.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Component, Input } from \"@angular/core\";\nvar CompleterListItemCmp = (function () {\n    function CompleterListItemCmp() {\n        this.parts = [];\n    }\n    CompleterListItemCmp.prototype.ngOnInit = function () {\n        if (!this.searchStr) {\n            this.parts.push({ isMatch: false, text: this.text });\n            return;\n        }\n        var matchStr = this.text.toLowerCase();\n        var matchPos = matchStr.indexOf(this.searchStr.toLowerCase());\n        var startIndex = 0;\n        while (matchPos >= 0) {\n            var matchText = this.text.slice(matchPos, matchPos + this.searchStr.length);\n            if (matchPos === 0) {\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length;\n            }\n            else if (matchPos > 0) {\n                var matchPart = this.text.slice(startIndex, matchPos);\n                this.parts.push({ isMatch: false, text: matchPart });\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length + matchPart.length;\n            }\n            matchPos = matchStr.indexOf(this.searchStr.toLowerCase(), startIndex);\n        }\n        if (startIndex < this.text.length) {\n            this.parts.push({ isMatch: false, text: this.text.slice(startIndex, this.text.length) });\n        }\n    };\n    return CompleterListItemCmp;\n}());\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], CompleterListItemCmp.prototype, \"text\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], CompleterListItemCmp.prototype, \"searchStr\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], CompleterListItemCmp.prototype, \"matchClass\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", String)\n], CompleterListItemCmp.prototype, \"type\", void 0);\nCompleterListItemCmp = __decorate([\n    Component({\n        selector: \"completer-list-item\",\n        template: \"\\n    <span class=\\\"completer-list-item-holder\\\" [ngClass]=\\\"{'completer-title': type === 'title', 'completer-description': type === 'description'}\\\" >\\n        <span class=\\\"completer-list-item\\\" *ngFor=\\\"let part of parts\\\" [ngClass]=\\\"part.isMatch ? matchClass : null\\\">{{part.text}}</span>\\n    </span>\\n    \"\n    })\n], CompleterListItemCmp);\nexport { CompleterListItemCmp };\n//# sourceMappingURL=completer-list-item-cmp.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Directive, ElementRef, Host } from \"@angular/core\";\nimport { CtrCompleter } from \"./ctr-completer\";\nvar CtrRowItem = (function () {\n    function CtrRowItem(row, index) {\n        this.row = row;\n        this.index = index;\n    }\n    return CtrRowItem;\n}());\nexport { CtrRowItem };\nvar CtrDropdown = (function () {\n    function CtrDropdown(completer, el) {\n        this.completer = completer;\n        this.el = el;\n        this.rows = [];\n        this.completer.registerDropdown(this);\n    }\n    CtrDropdown.prototype.ngOnInit = function () {\n        var css = getComputedStyle(this.el.nativeElement);\n        this.isScrollOn = css.maxHeight && css.overflowY === \"auto\";\n    };\n    CtrDropdown.prototype.ngOnDestroy = function () {\n        this.completer.registerDropdown(null);\n    };\n    CtrDropdown.prototype.registerRow = function (row) {\n        this.rows.push(row);\n    };\n    CtrDropdown.prototype.highlightRow = function (index) {\n        var highlited = this.rows.find(function (row) { return row.index === index; });\n        if (index < 0) {\n            if (this.currHighlited) {\n                this.currHighlited.row.setHighlited(false);\n            }\n            this.currHighlited = undefined;\n            this.completer.onHighlighted(null);\n            return;\n        }\n        if (!highlited) {\n            return;\n        }\n        if (this.currHighlited) {\n            this.currHighlited.row.setHighlited(false);\n        }\n        this.currHighlited = highlited;\n        this.currHighlited.row.setHighlited(true);\n        this.completer.onHighlighted(this.currHighlited.row.getDataItem());\n    };\n    CtrDropdown.prototype.clear = function () {\n        this.rows = [];\n    };\n    CtrDropdown.prototype.onSelected = function (item) {\n        this.completer.onSelected(item);\n    };\n    CtrDropdown.prototype.selectCurrent = function () {\n        if (this.currHighlited) {\n            this.onSelected(this.currHighlited.row.getDataItem());\n        }\n        else if (this.rows.length > 0) {\n            this.onSelected(this.rows[0].row.getDataItem());\n        }\n    };\n    CtrDropdown.prototype.nextRow = function () {\n        var nextRowIndex = 0;\n        if (this.currHighlited) {\n            nextRowIndex = this.currHighlited.index + 1;\n        }\n        this.highlightRow(nextRowIndex);\n        if (this.isScrollOn && this.currHighlited) {\n            var row = this.currHighlited.row.getNativeElement();\n            if (this.dropdownHeight() < row.getBoundingClientRect().bottom) {\n                this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(row));\n            }\n        }\n    };\n    CtrDropdown.prototype.prevRow = function () {\n        var nextRowIndex = -1;\n        if (this.currHighlited) {\n            nextRowIndex = this.currHighlited.index - 1;\n        }\n        this.highlightRow(nextRowIndex);\n        if (this.isScrollOn && this.currHighlited) {\n            var rowTop = this.dropdownRowTop();\n            if (rowTop < 0) {\n                this.dropdownScrollTopTo(rowTop - 1);\n            }\n        }\n    };\n    CtrDropdown.prototype.dropdownScrollTopTo = function (offset) {\n        this.el.nativeElement.scrollTop = this.el.nativeElement.scrollTop + offset;\n    };\n    CtrDropdown.prototype.dropdownRowTop = function () {\n        return this.currHighlited.row.getNativeElement().getBoundingClientRect().top -\n            (this.el.nativeElement.getBoundingClientRect().top +\n                parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10));\n    };\n    CtrDropdown.prototype.dropdownHeight = function () {\n        return this.el.nativeElement.getBoundingClientRect().top +\n            parseInt(getComputedStyle(this.el.nativeElement).maxHeight, 10);\n    };\n    CtrDropdown.prototype.dropdownRowOffsetHeight = function (row) {\n        var css = getComputedStyle(row);\n        return row.offsetHeight +\n            parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10);\n    };\n    return CtrDropdown;\n}());\nCtrDropdown = __decorate([\n    Directive({\n        selector: \"[ctrDropdown]\",\n    }),\n    __param(0, Host()),\n    __metadata(\"design:paramtypes\", [CtrCompleter, ElementRef])\n], CtrDropdown);\nexport { CtrDropdown };\n//# sourceMappingURL=ctr-dropdown.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Directive, EventEmitter, Host, HostListener, Input, Output } from \"@angular/core\";\nimport { NgModel } from \"@angular/forms\";\nimport { CtrCompleter } from \"./ctr-completer\";\n// keyboard events\nvar KEY_DW = 40;\nvar KEY_RT = 39;\nvar KEY_UP = 38;\nvar KEY_LF = 37;\nvar KEY_ES = 27;\nvar KEY_EN = 13;\nvar KEY_TAB = 9;\nvar CtrInput = (function () {\n    function CtrInput(completer, ngModel) {\n        var _this = this;\n        this.completer = completer;\n        this.ngModel = ngModel;\n        this.clearSelected = false;\n        this.overrideSuggested = false;\n        this.fillHighlighted = true;\n        this.ngModelChange = new EventEmitter();\n        this._searchStr = \"\";\n        this._displayStr = \"\";\n        this.completer.selected.subscribe(function (item) {\n            if (!item) {\n                return;\n            }\n            if (_this.clearSelected) {\n                _this.searchStr = \"\";\n            }\n            else {\n                _this.searchStr = item.title;\n            }\n            _this.ngModelChange.emit(_this.searchStr);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            if (_this.fillHighlighted) {\n                if (item) {\n                    _this._displayStr = item.title;\n                    _this.ngModelChange.emit(item.title);\n                }\n                else {\n                    _this._displayStr = _this.searchStr;\n                    _this.ngModelChange.emit(_this.searchStr);\n                }\n            }\n        });\n        this.ngModel.valueChanges.subscribe(function (value) {\n            if (_this._displayStr != value) {\n                _this.searchStr = value;\n            }\n        });\n    }\n    CtrInput.prototype.keyupHandler = function (event) {\n        if (event.keyCode === KEY_LF || event.keyCode === KEY_RT || event.keyCode === KEY_TAB) {\n            // do nothing\n            return;\n        }\n        if (event.keyCode === KEY_UP || event.keyCode === KEY_EN) {\n            event.preventDefault();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.search(this.searchStr);\n        }\n        else if (event.keyCode === KEY_ES) {\n            this.restoreSearchValue();\n            this.completer.clear();\n        }\n        else {\n            this.completer.search(this.searchStr);\n        }\n    };\n    CtrInput.prototype.keydownHandler = function (event) {\n        if (event.keyCode === KEY_EN) {\n            if (this.completer.hasHighlited()) {\n                event.preventDefault();\n            }\n            this.handleSelection();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.nextRow();\n        }\n        else if (event.keyCode === KEY_UP) {\n            event.preventDefault();\n            this.completer.prevRow();\n        }\n        else if (event.keyCode === KEY_TAB) {\n            this.handleSelection();\n        }\n        else if (event.keyCode === KEY_ES) {\n            // This is very specific to IE10/11 #272\n            // without this, IE clears the input text\n            event.preventDefault();\n        }\n    };\n    CtrInput.prototype.onBlur = function (event) {\n        var _this = this;\n        setTimeout(function () {\n            if (_this.overrideSuggested) {\n                _this.completer.onSelected({ title: _this.searchStr, originalObject: null });\n            }\n            else {\n                _this.restoreSearchValue();\n            }\n            _this.completer.clear();\n        }, 200);\n    };\n    Object.defineProperty(CtrInput.prototype, \"searchStr\", {\n        get: function () {\n            return this._searchStr;\n        },\n        set: function (term) {\n            this._searchStr = term;\n            this._displayStr = term;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrInput.prototype.handleSelection = function () {\n        if (this.overrideSuggested) {\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\n        }\n        else if (this.completer.hasHighlited()) {\n            this.completer.selectCurrent();\n        }\n        else {\n            this.completer.clear();\n        }\n    };\n    CtrInput.prototype.restoreSearchValue = function () {\n        if (this.fillHighlighted) {\n            // Restore searched value if there is no overrideSuggested\n            if (this._displayStr != this.searchStr) {\n                this._displayStr = this.searchStr;\n                this.ngModelChange.emit(this.searchStr);\n            }\n        }\n    };\n    return CtrInput;\n}());\n__decorate([\n    Input(\"clearSelected\"),\n    __metadata(\"design:type\", Object)\n], CtrInput.prototype, \"clearSelected\", void 0);\n__decorate([\n    Input(\"overrideSuggested\"),\n    __metadata(\"design:type\", Object)\n], CtrInput.prototype, \"overrideSuggested\", void 0);\n__decorate([\n    Input(\"fillHighlighted\"),\n    __metadata(\"design:type\", Object)\n], CtrInput.prototype, \"fillHighlighted\", void 0);\n__decorate([\n    Output(),\n    __metadata(\"design:type\", EventEmitter)\n], CtrInput.prototype, \"ngModelChange\", void 0);\n__decorate([\n    HostListener(\"keyup\", [\"$event\"]),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", void 0)\n], CtrInput.prototype, \"keyupHandler\", null);\n__decorate([\n    HostListener(\"keydown\", [\"$event\"]),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", void 0)\n], CtrInput.prototype, \"keydownHandler\", null);\n__decorate([\n    HostListener(\"blur\", [\"$event\"]),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", void 0)\n], CtrInput.prototype, \"onBlur\", null);\nCtrInput = __decorate([\n    Directive({\n        selector: \"[ctrInput]\",\n    }),\n    __param(0, Host()),\n    __metadata(\"design:paramtypes\", [CtrCompleter, NgModel])\n], CtrInput);\nexport { CtrInput };\n//# sourceMappingURL=ctr-input.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { ChangeDetectorRef, Directive, Host, Input, TemplateRef, ViewContainerRef } from \"@angular/core\";\nimport { Observable } from \"rxjs/Rx\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { MIN_SEARCH_LENGTH, PAUSE, CLEAR_TIMEOUT } from \"../globals\";\nvar CtrListContext = (function () {\n    function CtrListContext(results, searching, searchInitialized) {\n        this.results = results;\n        this.searching = searching;\n        this.searchInitialized = searchInitialized;\n    }\n    return CtrListContext;\n}());\nexport { CtrListContext };\nvar CtrList = CtrList_1 = (function () {\n    function CtrList(completer, templateRef, viewContainer, cd) {\n        this.completer = completer;\n        this.templateRef = templateRef;\n        this.viewContainer = viewContainer;\n        this.cd = cd;\n        this.ctrListMinSearchLength = MIN_SEARCH_LENGTH;\n        this.ctrListPause = PAUSE;\n        this.ctrListAutoMatch = false;\n        // private results: CompleterItem[] = [];\n        this.term = null;\n        // private searching = false;\n        this.searchTimer = null;\n        this.clearTimer = null;\n        this.ctx = new CtrListContext([], false, false);\n    }\n    CtrList.hasTerm = function (term) {\n        return term || term === \"\";\n    };\n    CtrList.prototype.ngOnInit = function () {\n        this.completer.registerList(this);\n        this.viewContainer.createEmbeddedView(this.templateRef, new CtrListContext([], false, false));\n    };\n    Object.defineProperty(CtrList.prototype, \"dataService\", {\n        set: function (newService) {\n            var _this = this;\n            this._dataService = newService;\n            if (this._dataService) {\n                this._dataService\n                    .catch(function (err) { return _this.handleError(err); })\n                    .subscribe(function (results) {\n                    _this.ctx.searchInitialized = true;\n                    _this.ctx.searching = false;\n                    _this.ctx.results = results;\n                    if (_this.ctrListAutoMatch && results.length === 1 && results[0].title && CtrList_1.hasTerm(_this.term) &&\n                        results[0].title.toLocaleLowerCase() === _this.term.toLocaleLowerCase()) {\n                        // Do automatch\n                        _this.completer.onSelected(results[0]);\n                    }\n                    _this.refreshTemplate();\n                });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrList.prototype.search = function (term) {\n        var _this = this;\n        if (CtrList_1.hasTerm(term) && term.length >= this.ctrListMinSearchLength && this.term !== term) {\n            if (this.searchTimer) {\n                this.searchTimer.unsubscribe();\n                this.searchTimer = null;\n            }\n            if (!this.ctx.searching) {\n                this.ctx.results = [];\n                this.ctx.searching = true;\n                this.ctx.searchInitialized = true;\n                this.refreshTemplate();\n            }\n            if (this.clearTimer) {\n                this.clearTimer.unsubscribe();\n            }\n            this.searchTimer = Observable.timer(this.ctrListPause).subscribe(function () {\n                _this.searchTimerComplete(term);\n            });\n        }\n    };\n    CtrList.prototype.clear = function () {\n        var _this = this;\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n        }\n        this.clearTimer = Observable.timer(CLEAR_TIMEOUT).subscribe(function () {\n            _this._clear();\n        });\n    };\n    CtrList.prototype._clear = function () {\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n            this.searchTimer = null;\n        }\n        if (this.dataService) {\n            this.dataService.cancel();\n        }\n        this.ctx.results = [];\n        this.ctx.searchInitialized = false;\n        this.term = null;\n        this.viewContainer.clear();\n    };\n    CtrList.prototype.searchTimerComplete = function (term) {\n        // Begin the search\n        if (!CtrList_1.hasTerm(term) || term.length < this.ctrListMinSearchLength) {\n            this.ctx.searching = false;\n            return;\n        }\n        this.term = term;\n        this._dataService.search(term);\n    };\n    CtrList.prototype.handleError = function (error) {\n        this.ctx.searching = false;\n        var errMsg = \"search error\";\n        if (error) {\n            errMsg = (error.message) ? error.message :\n                error.status ? error.status + \" - \" + error.statusText : \"Server error\";\n        }\n        if (console && console.error) {\n            console.error(errMsg); // log to console \n        }\n        this.refreshTemplate();\n        return Observable.throw(errMsg);\n    };\n    CtrList.prototype.refreshTemplate = function () {\n        // Recreate the template\n        this.viewContainer.clear();\n        this.viewContainer.createEmbeddedView(this.templateRef, this.ctx);\n        this.cd.markForCheck();\n    };\n    return CtrList;\n}());\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CtrList.prototype, \"ctrListMinSearchLength\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CtrList.prototype, \"ctrListPause\", void 0);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object)\n], CtrList.prototype, \"ctrListAutoMatch\", void 0);\n__decorate([\n    Input(\"ctrList\"),\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [Object])\n], CtrList.prototype, \"dataService\", null);\nCtrList = CtrList_1 = __decorate([\n    Directive({\n        selector: \"[ctrList]\",\n    }),\n    __param(0, Host()),\n    __metadata(\"design:paramtypes\", [CtrCompleter,\n        TemplateRef,\n        ViewContainerRef,\n        ChangeDetectorRef])\n], CtrList);\nexport { CtrList };\nvar CtrList_1;\n//# sourceMappingURL=ctr-list.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Directive, ElementRef, Host, HostListener, Input, Renderer } from \"@angular/core\";\nimport { CtrDropdown, CtrRowItem } from \"./ctr-dropdown\";\nvar CtrRow = (function () {\n    function CtrRow(el, renderer, dropdown) {\n        this.el = el;\n        this.renderer = renderer;\n        this.dropdown = dropdown;\n        this.selected = false;\n    }\n    CtrRow.prototype.ngOnInit = function () {\n        this.dropdown.registerRow(new CtrRowItem(this, this._rowIndex));\n    };\n    Object.defineProperty(CtrRow.prototype, \"ctrRow\", {\n        set: function (index) {\n            this._rowIndex = index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrRow.prototype, \"dataItem\", {\n        set: function (item) {\n            this._item = item;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrRow.prototype.onClick = function (event) {\n        this.dropdown.onSelected(this._item);\n    };\n    CtrRow.prototype.onMouseEnter = function (event) {\n        this.dropdown.highlightRow(this._rowIndex);\n    };\n    CtrRow.prototype.setHighlited = function (selected) {\n        this.selected = selected;\n        this.renderer.setElementClass(this.el.nativeElement, \"completer-selected-row\", this.selected);\n    };\n    CtrRow.prototype.getNativeElement = function () {\n        return this.el.nativeElement;\n    };\n    CtrRow.prototype.getDataItem = function () {\n        return this._item;\n    };\n    return CtrRow;\n}());\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Number),\n    __metadata(\"design:paramtypes\", [Number])\n], CtrRow.prototype, \"ctrRow\", null);\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [Object])\n], CtrRow.prototype, \"dataItem\", null);\n__decorate([\n    HostListener(\"click\", [\"$event\"]),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", void 0)\n], CtrRow.prototype, \"onClick\", null);\n__decorate([\n    HostListener(\"mouseenter\", [\"$event\"]),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Object]),\n    __metadata(\"design:returntype\", void 0)\n], CtrRow.prototype, \"onMouseEnter\", null);\nCtrRow = __decorate([\n    Directive({\n        selector: \"[ctrRow]\",\n    }),\n    __param(2, Host()),\n    __metadata(\"design:paramtypes\", [ElementRef, Renderer, CtrDropdown])\n], CtrRow);\nexport { CtrRow };\n//# sourceMappingURL=ctr-row.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { HttpModule } from \"@angular/http\";\nimport { CompleterCmp } from \"./components/completer-cmp\";\nimport { CompleterListItemCmp } from \"./components/completer-list-item-cmp\";\nimport { CompleterService } from \"./services/completer-service\";\nimport { LocalDataFactoryProvider, RemoteDataFactoryProvider } from \"./services/completer-data-factory\";\nimport { CtrCompleter } from \"./directives/ctr-completer\";\nimport { CtrDropdown } from \"./directives/ctr-dropdown\";\nimport { CtrInput } from \"./directives/ctr-input\";\nimport { CtrList } from \"./directives/ctr-list\";\nimport { CtrRow } from \"./directives/ctr-row\";\nimport { CommonModule } from \"@angular/common\";\nvar Ng2CompleterModule = (function () {\n    function Ng2CompleterModule() {\n    }\n    return Ng2CompleterModule;\n}());\nNg2CompleterModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            FormsModule,\n            HttpModule\n        ],\n        declarations: [\n            CompleterListItemCmp,\n            CtrCompleter,\n            CtrDropdown,\n            CtrInput,\n            CtrList,\n            CtrRow,\n            CompleterCmp\n        ],\n        exports: [\n            CompleterCmp,\n            CompleterListItemCmp,\n            CtrCompleter,\n            CtrDropdown,\n            CtrInput,\n            CtrList,\n            CtrRow\n        ],\n        providers: [\n            CompleterService,\n            LocalDataFactoryProvider,\n            RemoteDataFactoryProvider\n        ]\n    })\n], Ng2CompleterModule);\nexport { Ng2CompleterModule };\n//# sourceMappingURL=ng2-completer.module.js.map"],"names":["localDataFactory","LocalData","remoteDataFactory","http","RemoteData","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","exports","CtrCompleter","this","selected","EventEmitter","highlighted","_hasHighlited","hasSelected","prototype","ngOnInit","registerList","list","registerDropdown","dropdown","onHighlighted","item","emit","onSelected","clear","search","term","selectCurrent","nextRow","prevRow","hasHighlited","Output","Directive","selector","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","p","hasOwnProperty","__","constructor","create","CompleterBaseData","_super","call","cancel","searchFields","_searchFields","titleField","_titleField","descriptionField","_descriptionField","imageField","_imageField","extractMatches","data","_this","matches","split","undefined","filter","values","map","searchField","extractValue","value","some","toString","toLowerCase","indexOf","extractTitle","field","join","obj","keys","result","processResults","formattedText","formattedDesc","description","image","results","push","title","originalObject","Subject","Observable","subscribe","res","_data","savedTerm","next","Injectable","_urlFormater","_dataField","remoteUrl","_remoteUrl","urlFormater","dataField","headers","_headers","url","encodeURIComponent","remoteSearch","get","Headers","json","matchaes","catch","err","error","unsubscribe","__param","paramIndex","decorator","CompleterService","local","localData","remote","remoteData","Inject","MAX_CHARS","MIN_SEARCH_LENGTH","PAUSE","TEXT_SEARCHING","TEXT_NORESULTS","CLEAR_TIMEOUT","noop","COMPLETER_CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","CompleterCmp","multi","completerService","inputName","pause","minSearchLength","maxChars","overrideSuggested","clearSelected","fillHighlighted","placeholder","textSearching","textNoResults","autoMatch","disableInput","autofocus","blur","searchStr","control","FormControl","displaySearching","_onTouchedCallback","_onChangeCallback","set","enumerable","configurable","onTouched","writeValue","registerOnChange","fn","registerOnTouched","ngAfterViewInit","ctrInput","nativeElement","focus","datasource","dataService","completer","onBlur","onChange","open","searchValue","close","Input","String","Number","ViewChild","ElementRef","Component","template","styles","providers","CompleterListItemCmp","parts","isMatch","text","matchStr","matchPos","startIndex","matchText","slice","matchPart","LocalDataFactoryProvider","useFactory","RemoteDataFactoryProvider","deps","Http","CtrRowItem","row","index","CtrDropdown","el","rows","css","getComputedStyle","isScrollOn","maxHeight","overflowY","ngOnDestroy","registerRow","highlightRow","highlited","find","currHighlited","setHighlited","getDataItem","nextRowIndex","getNativeElement","dropdownHeight","getBoundingClientRect","bottom","dropdownScrollTopTo","dropdownRowOffsetHeight","rowTop","dropdownRowTop","offset","scrollTop","top","parseInt","paddingTop","offsetHeight","marginTop","marginBottom","Host","KEY_DW","KEY_RT","KEY_UP","KEY_LF","KEY_ES","KEY_EN","KEY_TAB","CtrInput","ngModel","ngModelChange","_searchStr","_displayStr","valueChanges","keyupHandler","event","keyCode","preventDefault","restoreSearchValue","keydownHandler","handleSelection","setTimeout","HostListener","Function","NgModel","CtrListContext","searching","searchInitialized","CtrList_1","CtrList","templateRef","viewContainer","cd","ctrListMinSearchLength","ctrListPause","ctrListAutoMatch","searchTimer","clearTimer","ctx","hasTerm","createEmbeddedView","newService","_dataService","handleError","toLocaleLowerCase","refreshTemplate","timer","searchTimerComplete","_clear","errMsg","message","status","statusText","console","throw","markForCheck","TemplateRef","ViewContainerRef","ChangeDetectorRef","CtrRow","renderer","_rowIndex","_item","onClick","onMouseEnter","setElementClass","Renderer","Ng2CompleterModule","NgModule","imports","CommonModule","FormsModule","HttpModule","declarations"],"mappings":"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"}